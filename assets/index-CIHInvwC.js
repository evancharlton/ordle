import{n as p,r as u,j as r,G as c,M as b,C,a as x,b as v,c as _,u as y,A as M}from"./index-DeR4oOij.js";const E=(e,n)=>{const{mode:l}=n;switch(l){case"reset":return{...e,mode:"solution",solution:"",guess:"",guesses:[],valid:!1,error:""};case"add-letter":{if(e.mode==="solution"){const s=(e.solution+n.letter).substring(0,5);return{...e,solution:s,valid:s.length===5,error:""}}else if(e.mode==="guess"){const s=(e.guess+n.letter).substring(0,5);return{...e,guess:s,valid:s.length===5,error:""}}return e}case"commit":return e.valid?e.mode==="solution"?{...e,mode:"guess"}:e.mode==="guess"?{...e,guesses:[...e.guesses.filter(s=>s!==e.guess),e.guess],guess:"",valid:!1}:e:{...e,error:"Ikke nok bokstaver"};case"remove-letter":{if(e.mode==="solution"){const s=e.solution.substring(0,Math.max(0,e.solution.length-1));return{...e,solution:s,valid:s.length===5,error:""}}else if(e.mode==="guess"){const s=e.guess.substring(0,Math.max(0,e.guess.length-1));return{...e,guess:s,valid:s.length===5,error:""}}return e}case"remove-guess":return{...e,guesses:e.guesses.filter(s=>s!==n.guess)};case"reset-guess":return{...e,guess:""};default:return p(l,e)}},A="_info_1twco_1",B="_container_1twco_10",I="_grid_1twco_16",L="_words_1twco_22",g={info:A,container:B,grid:I,words:L},j=()=>r.jsx(r.Fragment,{}),G=()=>{const[e,n]=u.useReducer(E,{mode:"solution",solution:"",guess:"",guesses:[],valid:!1,error:""}),{solution:l,guesses:s,guess:t,error:a,mode:m,valid:d}=e;u.useEffect(()=>{const o=i=>{if(i.ctrlKey||i.metaKey)return;if(i.code==="Enter"){n({mode:"commit"});return}if(i.code==="Backspace"){n({mode:"remove-letter"});return}const f=i.key.toLocaleLowerCase();M[f]&&n({mode:"add-letter",letter:f})};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[]);const h=u.useCallback(o=>()=>{n({mode:"remove-guess",guess:o})},[]),k=u.useMemo(()=>s.map((o,i)=>r.jsx(c,{guess:o,onClick:h(o),Icon:b},`${o}-${i}`)),[s,h]),w=u.useMemo(()=>{if(s.length===5)return null;const o=[];for(let i=0;i<4-s.length;i+=1)o.push(r.jsx(c,{guess:"",onClick:()=>{},Icon:j},`filler-${i}`));return o},[s.length]);return r.jsx(C.Provider,{value:{word:l,gameNumber:-1},children:r.jsxs("div",{className:g.container,children:[r.jsxs("div",{className:g.grid,children:[r.jsxs("div",{className:g.info,children:[r.jsx("h1",{children:"Ordle puslespillbygger"}),r.jsxs("ol",{children:[r.jsx("li",{children:"Skriv et ord som er løsningen"}),r.jsx("li",{children:"Skriv ord som er gjetninger"}),r.jsx("li",{children:"Vis mulige løsninger på den høyre siden"})]})]}),a&&r.jsx("span",{style:{textAlign:"center"},children:a}),k,r.jsx(c,{guess:t,Icon:m==="guess"?d?x:v:j,onClick:()=>{d&&t.length===5?n({mode:"commit"}):n({mode:"reset-guess"})}}),w,r.jsx(c,{guess:l,Icon:m==="solution"?d?x:v:_,onClick:()=>{n(m==="solution"&&d?{mode:"commit"}:{mode:"reset"})}})]}),r.jsx(N,{guesses:s})]})})},N=({guesses:e})=>{const{remainders:n,formattedCount:l}=y(e),s=u.useMemo(()=>n.length>3e3?r.jsx("div",{style:{textAlign:"center"},children:r.jsx("em",{children:"(masse ord)"})}):r.jsx("ul",{children:n.sort().map(t=>r.jsx("li",{children:t},t))}),[n]);return r.jsxs("div",{className:g.words,children:[r.jsxs("h2",{children:[l," mulige"]}),s]})};export{G as default};
